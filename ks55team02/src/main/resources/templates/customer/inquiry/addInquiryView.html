<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{customer/layout/layoutMain}">
<head>
    <title>문의 등록</title>
    <th:block layout:fragment="customCss">
        <!-- 필요한 라이브러리 -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
        <link rel="stylesheet" th:href="@{/maincss/assets/customcustomercss/addInquiryView.css}">
    </th:block>
</head>
<body>
<th:block layout:fragment="contents">
    <main class="main">
        <!-- 헤더 및 브레드크럼 (기존과 동일) -->
        <div class="page-header text-center" th:style="'background-image: url(' + @{/assets/images/page-header-bg.jpg} + ')'">
            <div class="container"><h1 class="page-title">INQUIRY REGISTRATION<span>문의 등록</span></h1></div>
        </div>
        <nav aria-label="breadcrumb" class="breadcrumb-nav">
            <div class="container">
                <ol class="breadcrumb">
                     <li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
                    <li class="breadcrumb-item"><a th:href="@{/customer/inquiry/inquiryList}">INQUIRYLIST</a></li>
                    <li class="breadcrumb-item active" aria-current="page">문의 등록</li>
                </ol>
            </div>
        </nav>

        <div class="page-content">
            <div class="container">
                <div class="inquiry-card-wrapper">
                    <div class="inquiry-card">
                        <h3 class="form-title">무엇을 도와드릴까요?</h3>
                        <p class="form-subtitle">문의하실 내용을 자세하게 작성해주세요.</p>

                        <form id="inquiryForm" th:action="@{/customer/inquiry/addInquiry}" method="post" novalidate>
                            
                            <!-- 1. 문의 대상 및 유형 (Select2 구조로 통일) -->
                           <div class="row">
							    <div class="col-md-6 mb-4">
							        <label for="inqryTrgtTypeCd" class="form-label">문의 대상</label>
							        <select class="form-select" id="inqryTrgtTypeCd" name="inqryTrgtTypeCd" data-placeholder="문의 대상을 선택하세요" required>
							            <option></option>
							            <option th:each="option : ${inquiryTargetOptions}"
							                    th:value="${option.name()}" th:text="${option.getTargetOption()}"></option>
							        </select>
							    </div>
							
							    <div class="col-md-6 mb-4" id="storeSelectRow" style="display: none;">
							        <label for="inqryStoreId" class="form-label">상점 선택</label>
							        <select class="form-select" id="inqryStoreId" name="inqryStoreId" data-placeholder="문의할 상점을 검색하세요">
							            <option></option>
							            <option th:each="option : ${storeList}"
							                    th:value="${option.storeId}" th:text="${option.storeConm}"></option>
							        </select>
							    </div>
							
							    <div class="col-md-6 mb-4">
							        <label for="inqryTypeCd" class="form-label">문의 유형</label>
							        <select class="form-select" id="inqryTypeCd" name="inqryTypeCd" data-placeholder="문의 유형을 선택하세요" required>
							            <option></option>
							            <option th:if="${inquiryOption != null}" th:each="l : ${inquiryOption}" 
							                    th:value="${l.name()}" th:text="${l.inquiryOption}"></option>
							        </select>
							    </div>
							</div>
                            
                            <!-- 2. 제목 및 내용 -->
                            <div class="mb-4">
							    <label for="inqryTtl" class="form-label">제목</label>
							    <input type="text" class="form-control" id="inqryTtl" name="inqryTtl" placeholder="제목을 입력하세요" required>
							</div>
                            <div class="mb-4">
                                <label for="inqryCn" class="form-label">내용</label>
                                <textarea class="form-control" id="inqryCn" name="inqryCn" placeholder="문의하실 내용을 입력하세요." style="height: 150px" required></textarea>
                            </div>

                            <!-- 비밀글 토글 스위치 -->
                            <div class="row align-items-center mb-4 ps-1">
						        <div class="col-auto">
						            <div class="form-check form-switch">
						                <input class="form-check-input" type="checkbox" role="switch" id="privateInquiry" name="prvtYn" value="1" style="margin-left: 0;">
						            </div>
						        </div>
						        <div class="col" style="padding-left: 0.5rem;">
						            <label for="privateInquiry" class="form-check-label" style="cursor: pointer;">비밀글로 문의하기</label>
						        </div>
						        <input type="hidden" name="_prvtYn" value="on"/>
						    </div>

                            <!-- 3. 첨부파일 -->
                            <div class="mb-4">
                                <label class="form-label mb-2">첨부 파일</label>
                                <label for="attachedFilesInput" class="file-drop-zone">
                                    <i class="fas fa-cloud-upload-alt file-drop-icon"></i>
                                    <span class="file-drop-text">클릭하거나 파일을 여기에 끌어다 놓으세요.</span>
                                </label>
                                <input type="file" class="d-none" name="attachedFiles" multiple id="attachedFilesInput">
                                <div id="filePreviewContainer" class="mt-3 d-flex flex-wrap gap-2"></div>
                            </div>

                            <!-- 4. 버튼 영역 (최종 수정) -->
							<div class="d-flex justify-content-end align-items-center mt-5">
							    <a th:href="@{/customer/inquiry/inquiryList}" class="btn btn-outline-secondary btn-lg">목록으로 돌아가기</a>
							    <button type="submit" class="btn btn-outline-primary btn-lg ms-3">문의 등록하기</button>
							</div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>
</th:block>

 <th:block layout:fragment="jsScript">
    <!-- Select2 JS 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <!-- 커스텀 JS 파일 -->
    <script th:src="@{/js/customerjs/addInquiryView.js}"></script>
</th:block>
</body>
</html>