<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<body>

<!-- ======================= ‚úÖ [Íµ¨Ï°∞ Î≥µÏõêÎê®] inquiryDetailFragment ======================= -->
<th:block th:fragment="inquiryDetailFragment (inquiry)">

    <!-- ‚úÖ [Ï∂îÍ∞ÄÎê®] Ï†ÑÏ≤¥ Ïπ¥ÎìúÎ•º Í∞êÏã∏Îäî Ïª®ÌÖåÏù¥ÎÑà. ÏòÅÏó≠ Ïπ®Î≤î Î¨∏Ï†úÎ•º Ìï¥Í≤∞Ìï©ÎãàÎã§. -->
    <div class="inquiry-detail-container">

        <!-- ======================= Î¨∏Ïùò Ïπ¥Îìú ======================= -->
        <div class="card inquiry-card mb-4">
            <!-- Ïπ¥Îìú Ìó§Îçî -->
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="mb-0 card-title-text">
                        <span th:text="${inquiry.prvtYn ? 'üîí ' : ''}"></span>
                        <span th:text="${inquiry.inqryTtl}">Î¨∏Ïùò Ï†úÎ™©</span>
                    </h5>
                    <th:block th:switch="${inquiry.prcsStts}">
                        <span th:case="'COMPLETED'" class="badge bg-success">ÎãµÎ≥ÄÏôÑÎ£å</span>
                        <span th:case="'RECEPTION'" class="badge bg-warning">Ï†ëÏàò</span>
                        <span th:case="*" class="badge bg-secondary">ÌôïÏù∏Ï§ë</span>
                    </th:block>
                </div>
            </div>
            <!-- Ïπ¥Îìú Î≥∏Î¨∏ -->
            <div class="card-body">
                <!-- Î¨∏Ïùò Î©îÌÉÄ Ï†ïÎ≥¥ (ÎìúÎ°≠Îã§Ïö¥ ÏúÑÏπò Ïú†ÏßÄ) -->
                <div class="inquiry-meta-flex">
                	<div>
                    <span class="meta-item"><i class="bi bi-person"></i> <strong class="meta-label">ÏûëÏÑ±Ïûê:</strong> <span th:text="${inquiry.writerInfo.userNcnm}"></span></span>
                    <span class="meta-item"><i class="bi bi-calendar-event"></i> <strong class="meta-label">ÏûëÏÑ±Ïùº:</strong> <span th:text="${#temporals.format(inquiry.regYmd, 'yyyy-MM-dd HH:mm')}"></span></span>
                    <span class="meta-item"><i class="bi bi-tags"></i> <strong class="meta-label">Î¨∏Ïùò Ïú†Ìòï:</strong> <span th:text="|${inquiry.inqryTrgtTypeCd} / ${inquiry.inqryTypeCd}|"></span></span>
                    </div>
                    <div class="edit-option">
				    <div class="options-container" th:if="${inquiry.wrtrId == session.loginUser?.userNo}">				    
				        <a href="javascript:void(0);" class="options-menu-toggle" id="options-toggle-btn">‚ãÆ</a>				
				        <div class="options-menu">
				            <button class="options-menu-item" id="editBtn" th:if="${inquiry.prcsStts == 'RECEPTION'}">
				                <i class="bi bi-pencil-square"></i> ÏàòÏ†ï
				            </button>
				            <button class="options-menu-item text-danger" id="deleteBtn" th:data-inquiry-id="${inquiry.inqryId}">
				                <i class="bi bi-trash"></i> ÏÇ≠Ï†ú
				            </button>
				        </div>
				    </div>
				</div>

                </div>

                <!-- ÎÇ¥Ïö© ÌëúÏãú Î∞è ÏàòÏ†ï ÏòÅÏó≠ -->
                <div class="content-wrapper">
                    <div id="viewMode">
                        <p class="card-text inquiry-content" th:utext="${#strings.replace(inquiry.inqryCn, '\n', '<br>')}"></p>
                    </div>
                    <div id="editMode" style="display: none;">
                        <textarea id="editContent" class="form-control" rows="10" th:text="${inquiry.inqryCn}"></textarea>
                    </div>
                </div>
                
                <!-- Ï≤®Î∂Ä Ïù¥ÎØ∏ÏßÄ -->
                <div th:if="${inquiry.inquiryImages != null && !inquiry.inquiryImages.isEmpty()}" class="inquiry-images-section mt-4">
                    <h6 class="mb-3">Ï≤®Î∂Ä Ïù¥ÎØ∏ÏßÄ</h6>
                    <div class="row">
                        <div class="col-md-4 col-sm-6 mb-3" th:each="image : ${inquiry.inquiryImages}">
                            <a th:href="${image.imgAddr}" data-bs-toggle="tooltip" title="ÌÅ¥Î¶≠ÌïòÏó¨ ÏõêÎ≥∏ Ïù¥ÎØ∏ÏßÄ Î≥¥Í∏∞">
                                <img th:src="${image.imgAddr}" alt="Ï≤®Î∂Ä Ïù¥ÎØ∏ÏßÄ" class="img-fluid rounded shadow-sm inquiry-thumbnail">
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ïπ¥Îìú Ìë∏ÌÑ∞: ÏàòÏ†ï Î™®Îìú Î≤ÑÌäº -->
            <div class="card-footer text-end" id="editModeButtons" style="display: none;">
                <button type="button" id="cancelEditBtn" class="btn btn-secondary btn-sm">Ï∑®ÏÜå</button>
                <button type="button" id="saveEditBtn" class="btn btn-primary btn-sm">Ï†ÄÏû•</button>
            </div>
            
        </div> <!-- Î¨∏Ïùò Ïπ¥Îìú ÎÅù --> <!-- Î¨∏Ïùò Ïπ¥Îìú ÎÅù -->

        <!-- ======================= ÎãµÎ≥Ä Ïπ¥Îìú ======================= -->
        <!-- <div class="card answer-card" id="answerSection" th:if="${(inquiry).answer != null}"> -->
        <div class="card answer-card" id="answerSection" th:if="${(inquiry).prcsStts == 'COMPLETED'}">
            <!-- Ïπ¥Îìú Ìó§Îçî -->
            <div class="card-header">
                <h5 class="mb-0 card-title-text">
                    <i class="bi bi-chat-left-text-fill"></i>
                    <span>ÎãµÎ≥Ä ÎÇ¥Ïö©</span>
                </h5>
            </div>
            <!-- Ïπ¥Îìú Î≥∏Î¨∏ -->
            <div class="card-body">
                <!-- ‚úÖ [Î≥µÏõêÎê®] ÎãµÎ≥Ä Î©îÌÉÄ Ï†ïÎ≥¥ (Ìïú Ï§Ñ Ïä§ÌÉÄÏùº) -->
                <div class="answer-meta-flex">
                    <span class="meta-item">
                        <i class="bi bi-person-check"></i>
                        <strong class="meta-label">ÎãµÎ≥ÄÏûê:</strong>
                        <span th:if="${(inquiry).storeInfo != null}" th:text="${(inquiry).storeInfo.storeConm}"></span>
                        <span th:if="${(inquiry).storeInfo == null}">Í¥ÄÎ¶¨Ïûê</span>
                    </span>
                    <span class="meta-item">
                        <i class="bi bi-clock"></i>
                        <strong class="meta-label">ÎãµÎ≥Ä ÏãúÍ∞Ñ:</strong>
                        <span id="displayAnswerTime" th:text="${#temporals.format((inquiry).answer.ansTm, 'yyyy-MM-dd HH:mm')}"></span>
                    </span>
                    <span class="meta-item" th:if="${(inquiry).answer.lastMdfcnDt != null}">
                        <i class="bi bi-pencil"></i>
                        <strong class="meta-label">ÏàòÏ†ï ÏãúÍ∞Ñ:</strong>
                        <span id="displayModifiedTime" th:text="${#temporals.format((inquiry).answer.lastMdfcnDt, 'yyyy-MM-dd HH:mm')}"></span>
                    </span>
                </div>
                
                <!-- ‚úÖ [Î≥µÏõêÎê®] ÎãµÎ≥Ä ÎÇ¥Ïö©ÏùÑ Í∞êÏã∏Îäî div -->
                <div class="content-wrapper">
                    <p id="displayAnswerContent" class="card-text answer-content" th:utext="${#strings.replace((inquiry).answer.ansCn, '\n', '<br>')}">
                        ÎãµÎ≥Ä ÎÇ¥Ïö©
                    </p>
                </div>
            </div>
        </div> <!-- ÎãµÎ≥Ä Ïπ¥Îìú ÎÅù -->


    </div> <!-- Ï†ÑÏ≤¥ Ïª®ÌÖåÏù¥ÎÑà ÎÅù -->

</th:block>

<!-- ‚úÖ [Ï§ëÏöî] JavaScript Î°úÏßÅÏùÑ fragmentÏùò ÏùºÎ∂ÄÎ°ú Ìè¨Ìï® -->
<!-- Ïù¥ Ïä§ÌÅ¨Î¶ΩÌä∏Í∞Ä Î©îÏù∏ Î†àÏù¥ÏïÑÏõÉÏùò Ïò¨Î∞îÎ•∏ ÏúÑÏπòÏóê ÏÇΩÏûÖÎêòÎèÑÎ°ù layout:fragmentÎ•º ÏÇ¨Ïö©Ìï©ÎãàÎã§. -->

<script th:inline="javascript">

</script>
</body>
</html>